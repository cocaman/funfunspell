<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"	
	xmlns:esl="http://www.funfunspell.com/jsf"
	template="/template/main_2column.xhtml">

	<ui:define name="subTitle">#{htmlHeadMsg.member_vocab_practice_title}</ui:define>
	<ui:define name="head">
		<meta name="keywords" content="#{htmlHeadMsg.member_vocab_practice_desc}" />
		<script type="text/javascript" src="#{request.contextPath}/player/swfobject.js"></script>
		<script type="text/javascript" src="/ESL/js/jquery-1.3.2.min.js"></script>
		<script type="text/javascript" src="/ESL/js/jquery-ui-1.7.2.custom.min.js"></script>
		<script type="text/javascript">
		<!--
		jQuery.noConflict();
				
		jQuery(document).ready(
			function() {				
				jQuery('#inputForm\\:answer').focus();
			}
		);
		-->
		</script>
	</ui:define>
	
	<ui:define name="titleImg"><img src="#{languageController.imagesPath}/title/myvocab.gif" /></ui:define>

	<ui:define name="mainContent">	
		<h2>
			<h:outputFormat value="#{memberWordMsg.practiceQuestionNo}">
				<f:param value="#{myVocabPracticeController.totalFullMark}"/>
			</h:outputFormat>
			<img src="#{languageController.imagesPath}/spacer.gif" width="280" height="1" />
			<h:outputText value="#{phonPracticeMsg.practiceMark}" />&nbsp;<h:outputText value="#{myVocabPracticeController.totalMark}" />
		</h2>
		<esl:scoreBar scoreBar="#{myVocabPracticeController.scoreBar}" mark="#{myVocabPracticeController.totalMark}" />				
	</ui:define>
	
	<ui:define name="leftColumn">
		<h:panelGroup rendered="${myVocabPracticeController.totalFullMark > 1}">				
		<!-- Histories -->
			<p class="innerHeading"><h:outputText value="#{phonPracticeMsg.practicePreviousQuestionsTitle}" /></p>					
			<table class="resultTable">
				<thead>
				<tr>
					<td width="20">&nbsp;</td>
					<td width="150"><h:outputText value="#{phonPracticeMsg.practicePhonetic}" /></td>
					<td width="80"><h:outputText value="#{phonPracticeMsg.practiceWord}" /></td>
					<td width="80"><h:outputText value="#{phonPracticeMsg.practiceAnswer}" /></td>
					<td width="20">&nbsp;</td>
				</tr>
				</thead>																														
				<t:dataList var="i" rowIndexVar="index" value="#{myVocabPracticeController.history}" >
				<tr>
					<td><strong>Q<h:outputText value="#{myVocabPracticeController.totalFullMark-index-1}" /></strong></td>
					<td>[<h:outputText escape="false" value="#{myVocabPracticeController.history[index].question.IPA}" />]</td>
					<td><a href="#{phonPracticeMsg.practiceDictionaryLink}#{myVocabPracticeController.history[index].question.word}" target="_blank"><u><h:outputText value="#{myVocabPracticeController.history[index].question.word}" /></u></a></td>
					<td><h:outputText value="#{myVocabPracticeController.history[index].answer}" /></td>
					<td>
						<h:panelGroup rendered="#{myVocabPracticeController.history[index].correct}"><img src="#{request.contextPath}/images/graphic/right.gif" /></h:panelGroup>
						<h:panelGroup rendered="#{!myVocabPracticeController.history[index].correct}"><img src="#{request.contextPath}/images/graphic/wrong.gif" /></h:panelGroup>
					</td>	
				</tr>
				</t:dataList>									
			</table>
			<p>* #{phonPracticeMsg.practiceWordExplanation}</p>
		</h:panelGroup>
	</ui:define>
	
	<ui:define name="rightColumn">
		<h:form styleClass="inputform" id="inputForm" onsubmit="return submitRequest(this)">
			<div id="player1" style="clear: none"><a href="http://www.macromedia.com/go/getflashplayer">Get the Flash Player</a> for pronounce.</div>
		    <script type="text/javascript">
			    var player1 = new SWFObject("#{request.contextPath}/player/btn_#{languageController.locale}.swf", "line", "184", "30", "7");
			    player1.addVariable("path","#{myVocabPracticeController.memberWord.word.pronouncedLink}");
			    player1.write("player1");
		    </script>
		    <p>&nbsp;</p>
		    <table style="color: #EE6600;">								    								    	
		    	<tr id="IPA">
		    		<td width="180" class="innerHeading"><h:outputText value="#{phonPracticeMsg.practicePhonetic}" />:</td>
			    	<td class="innerHeading">[<h:outputText escape="false" value="#{myVocabPracticeController.memberWord.word.IPA}" />]</td>											
			    </tr>									    
			</table>			
			<h:outputText style="color: #EE6600;" value="#{phonPracticeMsg.practiceInputAnsTitle}" styleClass="formLarge" /><br />
			<h:inputText id="answer" autocomplete="off" value="#{myVocabPracticeController.answer}" style="color: #EE6600;" styleClass="formLarge" maxlength="30">
				<t:validateRegExpr pattern="([a-zA-Z ]+[\-/. ]?)+" message="#{phonPracticeMsg.practiceInvalidInput}"/>
			</h:inputText>
			<div style="margin-bottom: 15px; margin-top: 15px;" class="buttons">
				<h:commandLink onclick="return submitRequest();" styleClass="orange" action="#{myVocabPracticeController.submitAnswer}"><img src="#{request.contextPath}/images/icon/silk/tick.png" />#{phonPracticeMsg.practiceSubmit}</h:commandLink>				
			</div>
			<img src="#{languageController.imagesPath}/spacer.gif" width="1" height="40" />											
			<div><h:message for="answer" errorClass="error" /></div>
		
		<h:panelGroup rendered="#{myVocabPracticeController.memberWord.word.picFileName!=null and myVocabPracticeController.memberWord.word.picFileName!=''}">
			<img src="#{request.contextPath}/images/graphic/word/#{myVocabPracticeController.memberWord.word.picFileName}" />
		</h:panelGroup>			
		<table width="100%"><tr><td align="right">
			<h:commandLink action="#{myVocabPracticeController.completePractice}"><u><h:outputText value="#{memberWordMsg.practiceComplete}" /></u></h:commandLink>
		</td></tr></table>
		
		</h:form>		
	</ui:define>
</ui:composition>